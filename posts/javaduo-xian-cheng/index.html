<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content=#ffffff name=theme-color><meta content=#da532c name=msapplication-TileColor><link href=/icons/whatsoo.ico rel=manifest><link color=#5bbad5 href=/icons/whatsoo.ico rel=mask-icon><link href=/icons/whatsoo.ico rel=icon sizes=16x16 type=image/png><link href=/icons/whatsoo.ico rel=icon sizes=32x32 type=image/png><link href=/icons/whatsoo.ico rel=apple-touch-icon sizes=180x180><link crossorigin href=https://cdn.jsdelivr.net/npm/galleria@1.6.1/dist/themes/folio/galleria.folio.min.css integrity=sha384-+rY0QD+LRnTOquDMzGa9lXU6jIwdiQuwCJQ2cdcW0qeP/0UbjQCZlXnRsUMA+9pH rel=stylesheet><link crossorigin href=https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.1/css/academicons.min.css integrity=sha384-FIue+PI4SsI9XfHCz8dBLg33b0c1fMJgNU3X//L26FYbGnlSEfWmNT7zgWc2N9b6 rel=stylesheet><link integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css rel=stylesheet><link href=https://nova-me.github.io/deep-thought.css rel=stylesheet><title>
    
NOVA-ME | Java多线程

  </title><link crossorigin href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs rel=stylesheet><script crossorigin defer integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js></script><script crossorigin defer integrity=sha384-jiBVvJ8NGGj5n7kJaiWwWp9AjC+Yh8rhZY3GtAX8yU28azcLgoRo4oukO87g7zDT src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/mathtex-script-type.min.js></script><script crossorigin defer integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js></script><body class=has-background-white><nav aria-label="section navigation" class="navbar is-light" role=navigation><div class=container><div class=navbar-brand><a class="navbar-item is-size-5 has-text-weight-bold" href=https://nova-me.github.io>NOVA-ME</a><a class="navbar-burger burger" aria-expanded=false aria-label=menu data-target=navMenu role=button> <span aria-hidden=true></span> <span aria-hidden=true></span> <span aria-hidden=true></span> </a></div><div class=navbar-menu id=navMenu><div class="navbar-end has-text-centered"><a class="navbar-item has-text-weight-semibold" href=https://nova-me.github.io/> Home </a><a class="navbar-item has-text-weight-semibold" href=https://nova-me.github.io/posts> Posts </a><a class="navbar-item has-text-weight-semibold" href=https://nova-me.github.io/tags> Tags </a><a class="navbar-item has-text-weight-semibold" href=https://nova-me.github.io/categories> Categories </a><a class=navbar-item data-target=#search-modal id=nav-search title=Search> <span class=icon> <i class="fas fa-search"></i> </span> </a><a title="Switch to dark theme" class=navbar-item id=dark-mode> <span class=icon> <i class="fas fa-adjust"></i> </span> </a></div></div></div></nav><section class=section><div class=container><div class=columns><div class="column is-8 is-offset-2"><article class=box><h1 class=title>Java多线程</h1><p class=subtitle><div class="columns is-multiline is-gapless"><div class="column is-8"><span class="icon-text has-text-grey"> <span class=icon> <i class="fas fa-user"></i> </span> <span>NOVA-ME published on</span> <span class=icon> <i class="far fa-calendar-alt"></i> </span> <span><time datetime=2018-08-20>August 20, 2018</time></span> </span></div><div class="column is-4 has-text-right-desktop"><span class="icon-text has-text-grey"> <span class=icon> <i class="far fa-clock"></i> </span> <span>3 min,</span> <span class=icon> <i class="fas fa-pencil-alt"></i> </span> <span>576 words</span> </span></div><div class=column><p>Categories: <a class="has-text-info-dark has-text-weight-semibold" href=https://nova-me.github.io/categories/tech/> <span class=icon-text> <span class=icon> <i class="fas fa-cube"></i> </span> <span>Tech</span> </span> </a></div><div class="column has-text-right-desktop"><p>Tags: <a class="has-text-info-dark has-text-weight-semibold" href=https://nova-me.github.io/tags/java/> <span class=icon-text> <span class=icon> <i class="fas fa-tag"></i> </span> <span>Java</span> </span> </a> <a class="has-text-info-dark has-text-weight-semibold" href=https://nova-me.github.io/tags/duo-xian-cheng/> <span class=icon-text> <span class=icon> <i class="fas fa-tag"></i> </span> <span>多线程</span> </span> </a></div></div><div class="content mt-2"><p><strong>“空间换时间”</strong> 是多线程编程的核心哲学之一：我们通过消耗内存（创建线程栈、维护线程池状态、上下文切换的开销）来换取任务处理的并发度和响应速度（时间）。在工作中时常会用到多线程，下面介绍下常用的Java多线程工具。</p><span id=continue-reading></span><h3 id=yi-xian-cheng-guan-li-chi-hua-si-xiang-de-ji-zhi-ti-xian>一、 线程管理：池化思想的极致体现</h3><p><strong>核心理念：</strong> 避免频繁创建和销毁线程带来的系统开销（时间），通过维护一定数量的常驻线程（空间）来随时待命。<h4 id=threadpoolexecutor-xian-cheng-chi-he-xin-lei>ThreadPoolExecutor（线程池核心类）</h4><pre class=language-java data-lang=java style=background:#2b303b;color:#6c7079><code class=language-java data-lang=java><span style=color:#abb2bf>        </span><span style=color:#f0c678>ThreadPoolExecutor</span><span style=color:#abb2bf> threadPoolExecutor </span><span style=color:#adb7c9>= </span><span style=color:#cd74e8>new </span><span style=color:#f0c678>ThreadPoolExecutor</span><span style=color:#abb2bf>(
</span><span style=color:#abb2bf>                </span><span style=color:#db9d63>10</span><span style=color:#abb2bf>,
</span><span style=color:#abb2bf>                </span><span style=color:#db9d63>100</span><span style=color:#abb2bf>,
</span><span style=color:#abb2bf>                </span><span style=color:#db9d63>1</span><span style=color:#abb2bf>,
</span><span style=color:#abb2bf>                </span><span style=color:#f0c678>TimeUnit</span><span style=color:#abb2bf>.</span><span style=color:#db9d63>MINUTES</span><span style=color:#abb2bf>,
</span><span style=color:#abb2bf>                </span><span style=color:#cd74e8>new </span><span style=color:#f0c678>LinkedBlockingQueue</span><span style=color:#abb2bf><>(</span><span style=color:#db9d63>20000</span><span style=color:#abb2bf>),
</span><span style=color:#abb2bf>                </span><span style=color:#f0c678>Executors</span><span style=color:#abb2bf>.</span><span style=color:#eb6772>defaultThreadFactory</span><span style=color:#abb2bf>(), (</span><span style=color:#eb6772>runnable</span><span style=color:#abb2bf>, </span><span style=color:#eb6772>executor</span><span style=color:#abb2bf>) </span><span style=color:#cd74e8>-> </span><span style=color:#abb2bf>{
</span><span style=color:#abb2bf>                </span><span style=font-style:italic;color:#5f697a>// 当最大线程数+队列大小满负荷还有线程加入后的拒绝策略 默认ignored
</span><span style=color:#abb2bf>        });
</span></code></pre><pre class=language-java data-lang=java style=background:#2b303b;color:#6c7079><code class=language-java data-lang=java><span style=color:#cd74e8>public class </span><span style=color:#f0c678>UniverseThreadFactory </span><span style=color:#cd74e8>implements </span><span style=color:#9acc76>ThreadFactory </span><span style=color:#adb7c9>{
</span><span style=color:#adb7c9>
</span><span style=color:#adb7c9>    </span><span style=color:#cd74e8>private static final </span><span style=color:#f0c678>AtomicInteger </span><span style=color:#adb7c9>poolNumber = </span><span style=color:#cd74e8>new </span><span style=color:#f0c678>AtomicInteger</span><span style=color:#adb7c9>(</span><span style=color:#db9d63>1</span><span style=color:#adb7c9>);
</span><span style=color:#adb7c9>    </span><span style=color:#cd74e8>private final </span><span style=color:#f0c678>ThreadGroup </span><span style=color:#adb7c9>group;
</span><span style=color:#adb7c9>    </span><span style=color:#cd74e8>private final </span><span style=color:#f0c678>AtomicInteger </span><span style=color:#adb7c9>threadNumber = </span><span style=color:#cd74e8>new </span><span style=color:#f0c678>AtomicInteger</span><span style=color:#adb7c9>(</span><span style=color:#db9d63>1</span><span style=color:#adb7c9>);
</span><span style=color:#adb7c9>    </span><span style=color:#cd74e8>private final </span><span style=color:#f0c678>String </span><span style=color:#adb7c9>namePrefix;
</span><span style=color:#adb7c9>
</span><span style=color:#adb7c9>    </span><span style=color:#5cb3fa>UniverseThreadFactory</span><span style=color:#adb7c9>() {
</span><span style=color:#adb7c9>        group = </span><span style=color:#f0c678>Thread</span><span style=color:#adb7c9>.</span><span style=color:#eb6772>currentThread</span><span style=color:#adb7c9>().</span><span style=color:#eb6772>getThreadGroup</span><span style=color:#adb7c9>();
</span><span style=color:#adb7c9>        </span><span style=font-style:italic;color:#5f697a>// 可以自定义线程名称
</span><span style=color:#adb7c9>        namePrefix = </span><span style=color:#9acc76>"xxx" </span><span style=color:#adb7c9>+
</span><span style=color:#adb7c9>                poolNumber.</span><span style=color:#eb6772>getAndIncrement</span><span style=color:#adb7c9>() +
</span><span style=color:#adb7c9>                </span><span style=color:#9acc76>"-thread-"</span><span style=color:#adb7c9>;
</span><span style=color:#adb7c9>    }
</span><span style=color:#adb7c9>
</span><span style=color:#adb7c9>    @</span><span style=color:#eb6772>Override
</span><span style=color:#adb7c9>    </span><span style=color:#cd74e8>public </span><span style=color:#f0c678>Thread </span><span style=color:#5cb3fa>newThread</span><span style=color:#adb7c9>(</span><span style=color:#f0c678>Runnable </span><span style=color:#eb6772>r</span><span style=color:#adb7c9>) {
</span><span style=color:#adb7c9>        </span><span style=color:#f0c678>Thread</span><span style=color:#adb7c9> t = </span><span style=color:#cd74e8>new </span><span style=color:#f0c678>Thread</span><span style=color:#adb7c9>(group, r,
</span><span style=color:#adb7c9>                namePrefix + threadNumber.</span><span style=color:#eb6772>getAndIncrement</span><span style=color:#adb7c9>(),
</span><span style=color:#adb7c9>                </span><span style=color:#db9d63>0</span><span style=color:#adb7c9>);
</span><span style=color:#adb7c9>        </span><span style=color:#cd74e8>if </span><span style=color:#adb7c9>(t.</span><span style=color:#eb6772>isDaemon</span><span style=color:#adb7c9>())
</span><span style=color:#adb7c9>            t.</span><span style=color:#eb6772>setDaemon</span><span style=color:#adb7c9>(</span><span style=color:#db9d63>false</span><span style=color:#adb7c9>);
</span><span style=color:#adb7c9>        </span><span style=color:#cd74e8>if </span><span style=color:#adb7c9>(t.</span><span style=color:#eb6772>getPriority</span><span style=color:#adb7c9>() != </span><span style=color:#f0c678>Thread</span><span style=color:#adb7c9>.</span><span style=color:#db9d63>NORM_PRIORITY</span><span style=color:#adb7c9>)
</span><span style=color:#adb7c9>            t.</span><span style=color:#eb6772>setPriority</span><span style=color:#adb7c9>(</span><span style=color:#f0c678>Thread</span><span style=color:#adb7c9>.</span><span style=color:#db9d63>NORM_PRIORITY</span><span style=color:#adb7c9>);
</span><span style=color:#adb7c9>        </span><span style=color:#cd74e8>return</span><span style=color:#adb7c9> t;
</span><span style=color:#adb7c9>    }
</span><span style=color:#adb7c9>}
</span></code></pre><h3 id=er-bing-fa-liu-cheng-kong-zhi-duo-xian-cheng-de-hong-lu-deng>二、 并发流程控制：多线程的“红绿灯”</h3><p><strong>核心理念：</strong> 协调不同线程之间的执行顺序，确保逻辑正确性。<h4 id=countdownlatch>CountDownLatch</h4><p>初始化 new CountDownLatch(N)。子线程执行完调用 countDown()，主线程调用 await() 阻塞等待数值归零。<pre class=language-Java data-lang=Java style=background:#2b303b;color:#6c7079><code class=language-Java data-lang=Java><span style=color:#abb2bf>	</span><span style=font-style:italic;color:#5f697a>// 初始化
</span><span style=color:#abb2bf>	</span><span style=color:#f0c678>CountDownLatch</span><span style=color:#abb2bf> countDownLatch </span><span style=color:#adb7c9>= </span><span style=color:#cd74e8>new </span><span style=color:#f0c678>CountDownLatch</span><span style=color:#abb2bf>(</span><span style=color:#db9d63>20</span><span style=color:#abb2bf>);
</span><span style=color:#abb2bf>        </span><span style=color:#f0c678>ArrayList</span><span style=color:#abb2bf><</span><span style=color:#f0c678>Integer</span><span style=color:#abb2bf>> numList </span><span style=color:#adb7c9>= </span><span style=color:#f0c678>Lists</span><span style=color:#abb2bf>.</span><span style=color:#eb6772>newArrayListWithCapacity</span><span style=color:#abb2bf>(</span><span style=color:#db9d63>20</span><span style=color:#abb2bf>);
</span><span style=color:#abb2bf>        </span><span style=color:#cd74e8>for </span><span style=color:#abb2bf>(</span><span style=color:#cd74e8>int</span><span style=color:#abb2bf> i </span><span style=color:#adb7c9>= </span><span style=color:#db9d63>0</span><span style=color:#abb2bf>; i </span><span style=color:#adb7c9>< </span><span style=color:#db9d63>20</span><span style=color:#abb2bf>; i</span><span style=color:#adb7c9>++</span><span style=color:#abb2bf>) {
</span><span style=color:#abb2bf>            numList.</span><span style=color:#eb6772>add</span><span style=color:#abb2bf>(i </span><span style=color:#adb7c9>+ </span><span style=color:#db9d63>1</span><span style=color:#abb2bf>);
</span><span style=color:#abb2bf>        }
</span><span style=color:#abb2bf>        </span><span style=color:#cd74e8>for </span><span style=color:#abb2bf>(</span><span style=color:#f0c678>Integer</span><span style=color:#abb2bf> i </span><span style=color:#adb7c9>:</span><span style=color:#abb2bf> numList) {
</span><span style=color:#abb2bf>            threadPoolExecutor.</span><span style=color:#eb6772>execute</span><span style=color:#abb2bf>(() </span><span style=color:#cd74e8>-> </span><span style=color:#abb2bf>{
</span><span style=color:#abb2bf>                </span><span style=color:#cd74e8>try </span><span style=color:#abb2bf>{
</span><span style=color:#abb2bf>                    </span><span style=color:#f0c678>System</span><span style=color:#abb2bf>.out.</span><span style=color:#eb6772>println</span><span style=color:#abb2bf>(i);
</span><span style=color:#abb2bf>                } </span><span style=color:#cd74e8>catch </span><span style=color:#abb2bf>(</span><span style=color:#f0c678>Exception </span><span style=color:#eb6772>e</span><span style=color:#abb2bf>) {
</span><span style=color:#abb2bf>                    </span><span style=font-style:italic;color:#5f697a>// 添加日志
</span><span style=color:#abb2bf>                } </span><span style=color:#cd74e8>finally </span><span style=color:#abb2bf>{
</span><span style=color:#abb2bf>                    </span><span style=font-style:italic;color:#5f697a>// 子线程执行完调用 在finally块里面保证完成后调用
</span><span style=color:#abb2bf>                    countDownLatch.</span><span style=color:#eb6772>countDown</span><span style=color:#abb2bf>();
</span><span style=color:#abb2bf>                }
</span><span style=color:#abb2bf>            });
</span><span style=color:#abb2bf>        }
</span><span style=color:#abb2bf>        </span><span style=color:#cd74e8>try </span><span style=color:#abb2bf>{
</span><span style=color:#abb2bf>            </span><span style=color:#f0c678>System</span><span style=color:#abb2bf>.out.</span><span style=color:#eb6772>println</span><span style=color:#abb2bf>(</span><span style=color:#9acc76>"到达等待地点"</span><span style=color:#abb2bf>);
</span><span style=color:#abb2bf>            </span><span style=font-style:italic;color:#5f697a>// 阻塞等待数值归零
</span><span style=color:#abb2bf>            countDownLatch.</span><span style=color:#eb6772>await</span><span style=color:#abb2bf>();
</span><span style=color:#abb2bf>        } </span><span style=color:#cd74e8>catch </span><span style=color:#abb2bf>(</span><span style=color:#f0c678>InterruptedException </span><span style=color:#eb6772>e</span><span style=color:#abb2bf>) {
</span><span style=color:#abb2bf>            </span><span style=color:#cd74e8>throw new </span><span style=color:#f0c678>RuntimeException</span><span style=color:#abb2bf>(e);
</span><span style=color:#abb2bf>        }
</span><span style=color:#abb2bf>        threadPoolExecutor.</span><span style=color:#eb6772>shutdown</span><span style=color:#abb2bf>();
</span></code></pre><h4 id=cyclicbarrier>CyclicBarrier</h4><p>初始化new CyclicBarrier(N,()->{})。线程调用 await() 表示自己到达。可循环使用，适合分阶段的并行计算<pre class=language-java data-lang=java style=background:#2b303b;color:#6c7079><code class=language-java data-lang=java><span style=color:#abb2bf>	</span><span style=color:#cd74e8>int</span><span style=color:#abb2bf> parties </span><span style=color:#adb7c9>= </span><span style=color:#db9d63>3</span><span style=color:#abb2bf>;
</span><span style=color:#abb2bf>        </span><span style=color:#f0c678>List</span><span style=color:#abb2bf><</span><span style=color:#f0c678>Integer</span><span style=color:#abb2bf>> numList </span><span style=color:#adb7c9>= </span><span style=color:#f0c678>Lists</span><span style=color:#abb2bf>.</span><span style=color:#eb6772>newArrayList</span><span style=color:#abb2bf>();
</span><span style=color:#abb2bf>        </span><span style=color:#cd74e8>for </span><span style=color:#abb2bf>(</span><span style=color:#cd74e8>int</span><span style=color:#abb2bf> i </span><span style=color:#adb7c9>= </span><span style=color:#db9d63>0</span><span style=color:#abb2bf>; i </span><span style=color:#adb7c9><</span><span style=color:#abb2bf> parties; i</span><span style=color:#adb7c9>++</span><span style=color:#abb2bf>) {
</span><span style=color:#abb2bf>            numList.</span><span style=color:#eb6772>add</span><span style=color:#abb2bf>(i </span><span style=color:#adb7c9>+ </span><span style=color:#db9d63>1</span><span style=color:#abb2bf>);
</span><span style=color:#abb2bf>        }
</span><span style=color:#abb2bf>        </span><span style=color:#f0c678>List</span><span style=color:#abb2bf><</span><span style=color:#f0c678>Integer</span><span style=color:#abb2bf>> calcList </span><span style=color:#adb7c9>= </span><span style=color:#f0c678>Lists</span><span style=color:#abb2bf>.</span><span style=color:#eb6772>newArrayList</span><span style=color:#abb2bf>();
</span><span style=color:#abb2bf>        </span><span style=color:#f0c678>CyclicBarrier</span><span style=color:#abb2bf> cyclicBarrier </span><span style=color:#adb7c9>= </span><span style=color:#cd74e8>new </span><span style=color:#f0c678>CyclicBarrier</span><span style=color:#abb2bf>(parties, () </span><span style=color:#cd74e8>-> </span><span style=color:#abb2bf>{
</span><span style=color:#abb2bf>            </span><span style=font-style:italic;color:#5f697a>// 到达集合地点后最先执行的方法
</span><span style=color:#abb2bf>            </span><span style=color:#f0c678>System</span><span style=color:#abb2bf>.out.</span><span style=color:#eb6772>println</span><span style=color:#abb2bf>(</span><span style=color:#9acc76>"集合成功，执行方法成功" </span><span style=color:#adb7c9>+</span><span style=color:#abb2bf> calcList.</span><span style=color:#eb6772>toString</span><span style=color:#abb2bf>());
</span><span style=color:#abb2bf>        });
</span><span style=color:#abb2bf>        </span><span style=color:#cd74e8>for </span><span style=color:#abb2bf>(</span><span style=color:#f0c678>Integer</span><span style=color:#abb2bf> i </span><span style=color:#adb7c9>:</span><span style=color:#abb2bf> numList) {
</span><span style=color:#abb2bf>            threadPoolExecutor.</span><span style=color:#eb6772>execute</span><span style=color:#abb2bf>(() </span><span style=color:#cd74e8>-> </span><span style=color:#abb2bf>{
</span><span style=color:#abb2bf>                </span><span style=color:#cd74e8>try </span><span style=color:#abb2bf>{
</span><span style=color:#abb2bf>                    </span><span style=color:#f0c678>Thread</span><span style=color:#abb2bf>.</span><span style=color:#eb6772>sleep</span><span style=color:#abb2bf>((</span><span style=color:#cd74e8>long</span><span style=color:#abb2bf>) (</span><span style=color:#f0c678>Math</span><span style=color:#abb2bf>.</span><span style=color:#eb6772>random</span><span style=color:#abb2bf>() </span><span style=color:#adb7c9>* </span><span style=color:#db9d63>5000</span><span style=color:#abb2bf>));
</span><span style=color:#abb2bf>                    </span><span style=color:#f0c678>System</span><span style=color:#abb2bf>.out.</span><span style=color:#eb6772>println</span><span style=color:#abb2bf>(</span><span style=color:#9acc76>"线程：" </span><span style=color:#adb7c9>+ </span><span style=color:#f0c678>Thread</span><span style=color:#abb2bf>.</span><span style=color:#eb6772>currentThread</span><span style=color:#abb2bf>().</span><span style=color:#eb6772>getName</span><span style=color:#abb2bf>() </span><span style=color:#adb7c9>+ </span><span style=color:#9acc76>"到达集合点1，已经有" </span><span style=color:#adb7c9>+ </span><span style=color:#abb2bf>(cyclicBarrier.</span><span style=color:#eb6772>getNumberWaiting</span><span style=color:#abb2bf>() </span><span style=color:#adb7c9>+ </span><span style=color:#db9d63>1</span><span style=color:#abb2bf>) </span><span style=color:#adb7c9>+ </span><span style=color:#9acc76>"个到达"</span><span style=color:#abb2bf>);
</span><span style=color:#abb2bf>                    calcList.</span><span style=color:#eb6772>add</span><span style=color:#abb2bf>(cyclicBarrier.</span><span style=color:#eb6772>getNumberWaiting</span><span style=color:#abb2bf>());
</span><span style=color:#abb2bf>                    cyclicBarrier.</span><span style=color:#eb6772>await</span><span style=color:#abb2bf>();
</span><span style=color:#abb2bf>                    </span><span style=color:#f0c678>Thread</span><span style=color:#abb2bf>.</span><span style=color:#eb6772>sleep</span><span style=color:#abb2bf>((</span><span style=color:#cd74e8>long</span><span style=color:#abb2bf>) (</span><span style=color:#f0c678>Math</span><span style=color:#abb2bf>.</span><span style=color:#eb6772>random</span><span style=color:#abb2bf>() </span><span style=color:#adb7c9>* </span><span style=color:#db9d63>5000</span><span style=color:#abb2bf>));
</span><span style=color:#abb2bf>                    </span><span style=color:#f0c678>System</span><span style=color:#abb2bf>.out.</span><span style=color:#eb6772>println</span><span style=color:#abb2bf>(</span><span style=color:#9acc76>"线程：" </span><span style=color:#adb7c9>+ </span><span style=color:#f0c678>Thread</span><span style=color:#abb2bf>.</span><span style=color:#eb6772>currentThread</span><span style=color:#abb2bf>().</span><span style=color:#eb6772>getName</span><span style=color:#abb2bf>() </span><span style=color:#adb7c9>+ </span><span style=color:#9acc76>"到达集合点2，已经有" </span><span style=color:#adb7c9>+ </span><span style=color:#abb2bf>(cyclicBarrier.</span><span style=color:#eb6772>getNumberWaiting</span><span style=color:#abb2bf>() </span><span style=color:#adb7c9>+ </span><span style=color:#db9d63>1</span><span style=color:#abb2bf>) </span><span style=color:#adb7c9>+ </span><span style=color:#9acc76>"个到达"</span><span style=color:#abb2bf>);
</span><span style=color:#abb2bf>                    calcList.</span><span style=color:#eb6772>add</span><span style=color:#abb2bf>(cyclicBarrier.</span><span style=color:#eb6772>getNumberWaiting</span><span style=color:#abb2bf>());
</span><span style=color:#abb2bf>                    cyclicBarrier.</span><span style=color:#eb6772>await</span><span style=color:#abb2bf>();
</span><span style=color:#abb2bf>                } </span><span style=color:#cd74e8>catch </span><span style=color:#abb2bf>(</span><span style=color:#f0c678>Exception </span><span style=color:#eb6772>e</span><span style=color:#abb2bf>) {
</span><span style=color:#abb2bf>                    </span><span style=color:#cd74e8>throw new </span><span style=color:#f0c678>RuntimeException</span><span style=color:#abb2bf>(e);
</span><span style=color:#abb2bf>                }
</span><span style=color:#abb2bf>            });
</span><span style=color:#abb2bf>        }
</span></code></pre></div></article></div></div></div></section><section class=modal id=search-modal><div class=modal-background></div><div class=modal-card><header class=modal-card-head><p class=modal-card-title>Search</header><section class=modal-card-body><div class="field mb-2"><div class=control><input placeholder="Search this website." class=input id=search type=search></div></div><div class=search-results><div class=search-results__items></div></div></section></div><button class="modal-close is-large" aria-label=close></button></section><section class=section><div class=container><div class="columns is-centered"><div class="column is-8"><nav class=level><div class="level-item has-text-centered"><a class="button is-black is-outlined" href=https://nova-me.github.io/posts/mysqlchang-shi-zheng-li/> <span class="icon mr-2"> <i class="fas fa-arrow-circle-left"></i> </span> MySQL常用知识整理 </a></div></nav></div></div></div></section><footer class="footer py-4"><div class="content has-text-centered"><p>Built with <span class=icon-text> <span class=icon> <i class="fas fa-code"></i> </span> <span>code</span> </span> and <span class=icon-text> <span class=icon> <i class="fas fa-heart"></i> </span> <span>love</span> </span><p>Powered by <span class=icon-text> <span class=icon> <i class="fas fa-power-off"></i> </span> <span>zola</span> </span></div></footer><script crossorigin integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK src=https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js></script><script crossorigin integrity=sha384-QSfwGT8/EU536DKdtyP2D6SLlh8zBaZ0cVkwfrwhqzIU9VCfJT00CLVP5t+HAiYg src=https://cdn.jsdelivr.net/npm/galleria@1.6.1/dist/galleria.min.js></script><script crossorigin integrity=sha384-DwpKI+deZB267+hPKwiOIc5Y2GKsVL0mR6hgz7GgIu7AgAMYqJwcJKY1YBNfhWcY src=https://cdn.jsdelivr.net/npm/galleria@1.6.1/dist/themes/folio/galleria.folio.min.js></script><script crossorigin integrity=sha384-0yWn54pSGtfKCU+skfA69l25VsCw+MZt4LQov3xNRoS7YkAMrFokGgSBnAWSK4pv src=https://cdn.jsdelivr.net/npm/mermaid@8.13.5/dist/mermaid.min.js></script><script crossorigin integrity=sha384-xC3h1+IHXK8seA+8KfT79Z4e0GPsznjXBoMa5nd8ooWKplPyXx92NOmljWxLC/cs src=https://cdn.jsdelivr.net/npm/chart.xkcd@1.1.13/dist/chart.xkcd.min.js></script><script src=https://nova-me.github.io/elasticlunr.min.js></script><script src=https://nova-me.github.io/search_index.en.js></script><script src=https://nova-me.github.io/js/site.js></script>